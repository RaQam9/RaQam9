    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- إعدادات الحماية والاتصال ---
            const ADMIN_PASSWORD = '1122'; // <-- غيّر كلمة المرور هذه!
            const SUPABASE_URL = 'https://uxtxavurcgdeueeemmdi.supabase.co';
            const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV4dHhhdnVyY2dkZXVlZWVtbWRpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTEwMjQ4NzYsImV4cCI6MjA2NjYwMDg3Nn0.j7MrIoGzbzjurKyWGN0GgpMBIzl5exOsZrYlKCSmNbk';
            const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

            const loginScreen = document.getElementById('login-screen');
            const adminPanel = document.getElementById('admin-panel');
            const loginButton = loginScreen.querySelector('button');
            const addMatchForm = document.getElementById('add-match-form');

            // --- دالة تسجيل الدخول ---
            function login() {
                const passwordInput = document.getElementById('password-input').value;
                if (passwordInput === ADMIN_PASSWORD) {
                    loginScreen.classList.add('hidden');
                    adminPanel.classList.remove('hidden');
                    loadMatches();
                } else {
                    alert('كلمة المرور غير صحيحة!');
                }
            }
            
            // ربط دالة تسجيل الدخول بالزر
            loginButton.addEventListener('click', login);

            // --- دالة تحميل المباريات وعرضها ---
            async function loadMatches() {
                const list = document.getElementById('matches-list');
                list.innerHTML = '<li>جاري تحميل المباريات...</li>';

                const { data, error } = await supabase.from('matches').select('*').order('datetime', { ascending: false });

                if (error) {
                    list.innerHTML = `<li>حدث خطأ: ${error.message}</li>`;
                    console.error(error);
                    return;
                }

                list.innerHTML = '';
                if (data.length === 0) {
                    list.innerHTML = '<li>لا توجد مباريات حالياً.</li>';
                }
                data.forEach(match => {
                    const listItem = document.createElement('li');
                    listItem.dataset.matchId = match.id;
                    listItem.innerHTML = `
                        <span>${match.team1_name} ضد ${match.team2_name} - (${new Date(match.datetime).toLocaleDateString()})</span>
                        <button class="delete-btn">حذف</button>
                    `;
                    list.appendChild(listItem);
                });
            }

            // --- دالة حذف مباراة (باستخدام Event Delegation) ---
            document.getElementById('matches-list').addEventListener('click', async (e) => {
                if (e.target && e.target.classList.contains('delete-btn')) {
                    const listItem = e.target.closest('li');
                    const matchId = listItem.dataset.matchId;

                    if (!confirm('هل أنت متأكد من أنك تريد حذف هذه المباراة؟')) {
                        return;
                    }

                    const { error } = await supabase.from('matches').delete().eq('id', matchId);

                    if (error) {
                        alert(`فشل حذف المباراة: ${error.message}`);
                        console.error(error);
                    } else {
                        alert('تم حذف المباراة بنجاح.');
                        loadMatches(); // إعادة تحميل القائمة
                    }
                }
            });

            // --- ربط نموذج إضافة مباراة ---
            addMatchForm.addEventListener('submit', async (e) => {
                e.preventDefault();

                const form = e.target;
                const newMatch = {
                    team1_name: form.team1_name.value,
                    team1_logo: form.team1_logo.value,
                    team2_name: form.team2_name.value,
                    team2_logo: form.team2_logo.value,
                    league: form.league.value,
                    datetime: form.datetime.value,
                    channels: form.channels.value.split(',').map(c => c.trim()).filter(c => c),
                };

                const { error } = await supabase.from('matches').insert([newMatch]);

                if (error) {
                    alert(`فشل إضافة المباراة: ${error.message}`);
                    console.error(error);
                } else {
                    alert('تم إضافة المباراة بنجاح.');
                    form.reset();
                    loadMatches(); // إعادة تحميل القائمة
                }
            });
        });
    </script>
