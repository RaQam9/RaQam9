<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>ุฃุฎุจุงุฑ ูุชููุนุงุช ุงููุจุงุฑูุงุช</title>

    <!-- Supabase JS Client -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <!-- Google Fonts (Cairo) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">

    <!-- Link to your external stylesheet -->
    <link rel="stylesheet" href="style.css">

</head>
<body>

    <!-- Initial Loading Spinner -->
    <div id="loader">
        <i class="fas fa-spinner fa-spin"></i>
    </div>

    <!-- Header -->
    <header>
        <button id="user-icon-btn" class="user-icon-btn">
            <i class="fa-solid fa-user-pen"></i>
        </button>
        <nav>
            <button id="nav-news-btn" class="nav-btn">ุฃุฎุจุงุฑ ุงููุฏู</button>
            <button id="nav-predictions-btn" class="nav-btn bg-blue-600 text-white">ุงููุจุงุฑูุงุช</button>
        </nav>
        <!-- ูุฐุง ุงูุนูุตุฑ ูุงุฑุบ ูุนูู ุชูุงุฒู ูู ุงูุชุตููู -->
        <div style="width: 30px;"></div>
    </header>

    <!-- Main Content Area -->
    <main>
        <!-- Predictions Page -->
        <div id="predictions-page" class="page-container">
            <h1 class="page-title">๐ ุชููุนุงุช ุงููุจุงุฑูุงุช</h1>
            <div id="matches-container">
                <!-- Match cards will be injected here by JS -->
                <p class="loading-text"><i class="fas fa-spinner fa-spin"></i> ุฌุงุฑู ุชุญููู ุงููุจุงุฑูุงุช...</p>
            </div>
        </div>

        <!-- News Page -->
        <div id="news-page" class="page-container hidden">
            <!-- News Home (List of Articles) -->
            <div id="home-page" class="news-sub-page">
                 <h1 class="page-title">๐ฐ ุฃุฎุจุงุฑ ูุฑุฉ ุงููุฏู</h1>
                <div id="articles-grid">
                    <!-- Article cards will be injected here by JS -->
                    <p class="loading-text"><i class="fas fa-spinner fa-spin"></i> ุฌุงุฑู ุชุญููู ุงูุฃุฎุจุงุฑ...</p>
                </div>
            </div>
            <!-- Single Article View -->
            <div id="article-page" class="news-sub-page">
                <input type="hidden" id="article-id-hidden-input">
                <div id="article-content">
                    <!-- Full article content will be injected here -->
                </div>
                <div id="comments-section-news">
                    <h3 class="comments-title">ุงูุชุนูููุงุช</h3>
                    <div id="comments-list" class="comments-list-container">
                        <!-- News comments will be injected here -->
                    </div>
                    <form id="news-comment-form" name="news-comment-form" onsubmit="handleNewsCommentSubmit(event)">
                        <textarea id="comment-text" name="comment_text" placeholder="ุฃุถู ุชุนูููู..." required rows="3"></textarea>
                        <button id="submit-comment-btn" type="submit" class="submit-btn">ุฅุฑุณุงู ุงูุชุนููู</button>
                    </form>
                </div>
            </div>
        </div>
    </main>

    <!-- Authentication Modal -->
    <div id="auth-modal" class="modal-overlay">
        <div class="modal-content">
            <button id="close-auth-modal-btn" class="close-modal-btn">ร</button>
            
            <!-- Login View -->
            <div id="login-view">
                <h2>ุชุณุฌูู ุงูุฏุฎูู</h2>
                <form id="login-form" class="auth-form">
                    <input type="email" id="login-email" placeholder="ุงูุจุฑูุฏ ุงูุฅููุชุฑููู" required>
                    <input type="password" id="login-password" placeholder="ูููุฉ ุงููุฑูุฑ" required>
                    <button type="submit" class="submit-btn">ุฏุฎูู</button>
                </form>
                <div class="auth-switch">
                    <p>ููุณ ูุฏูู ุญุณุงุจุ <a id="show-signup">ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ</a></p>
                </div>
            </div>

            <!-- Signup View -->
            <div id="signup-view" style="display: none;">
                <h2>ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ</h2>
                <form id="signup-form" class="auth-form">
                    <input type="text" id="signup-username" placeholder="ุงุณู ุงููุณุชุฎุฏู" required>
                    <input type="email" id="signup-email" placeholder="ุงูุจุฑูุฏ ุงูุฅููุชุฑููู" required>
                    <input type="password" id="signup-password" placeholder="ูููุฉ ุงููุฑูุฑ" required>
                    <button type="submit" class="submit-btn">ุฅูุดุงุก ุญุณุงุจ</button>
                </form>
                <div class="auth-switch">
                    <p>ูุฏูู ุญุณุงุจ ุจุงููุนูุ <a id="show-login">ุชุณุฌูู ุงูุฏุฎูู</a></p>
                </div>
            </div>
            
            <!-- Logged In View -->
            <div id="loggedin-view" style="display: none;">
                <h2 id="user-email-display">ุฃููุงู ุจู!</h2>
                <button id="open-profile-btn" class="modal-button">ูููู ุงูุดุฎุตู</button>
                <button id="logout-btn" class="modal-button danger">ุชุณุฌูู ุงูุฎุฑูุฌ</button>
            </div>

            <p id="auth-message"></p>
        </div>
    </div>

    <!-- Profile Page -->
    <div id="profile-page" class="modal-overlay hidden">
        <div class="profile-content">
            <button id="close-profile-btn" class="close-modal-btn">ร</button>
            <h2>ุงูููู ุงูุดุฎุตู</h2>
            
            <div class="profile-section">
                <h3>ุชุนุฏูู ุงุณู ุงููุณุชุฎุฏู</h3>
                <input type="text" id="profile-username-input" class="text-input" placeholder="ุงูุชุจ ุงุณูู ุงูุฌุฏูุฏ ููุง">
                <button id="save-username-btn" class="submit-btn">ุญูุธ</button>
                <p id="username-status"></p>
            </div>
            
            <div class="profile-section">
                <h3>ุชููุนุงุชู</h3>
                <div id="profile-predictions-list" class="profile-list"></div>
            </div>

            <div class="profile-section">
                <h3>ุชุนูููุงุชู</h3>
                <div id="profile-comments-list" class="profile-list"></div>
            </div>
        </div>
    </div>
    
    <!-- Toasts for Notifications -->
    <div id="notification-toast" class="toast"></div>
    <div id="exit-toast" class="toast">ุงุถุบุท ูุฑุฉ ุฃุฎุฑู ููุฎุฑูุฌ</div>
    
    <!-- Link to your JavaScript file -->
    <script defer src="script.js"></script>

</body>
</html>
